{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\priv\\\\github\\\\plan-your-trip\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\priv\\\\github\\\\plan-your-trip\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar DbActions = {\n  add: 'create',\n  delete: 'delete',\n  update: 'update',\n  removeAll: 'removeAll'\n};\n\nvar useDbPresistentLocationService = function useDbPresistentLocationService() {\n  var add =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(location) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return dispatchDbAction(DbActions.add, location);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function add(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var remove =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(location) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return dispatchDbAction(DbActions.delete, location);\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function remove(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var edit =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(location) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return dispatchDbAction(DbActions.update, location);\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function edit(_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var removeAll =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              console.warning(\"Remove all is not implemented yet\");\n\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function removeAll() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return {\n    add: add,\n    remove: remove,\n    edit: edit,\n    removeAll: removeAll\n  };\n};\n\nvar dispatchDbAction =\n/*#__PURE__*/\nfunction () {\n  var _ref5 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(dbAction, data) {\n    var url, rawResponse, content;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            url = 'http://localhost:5000/locations/' + dbAction;\n            _context5.next = 3;\n            return fetch(url, {\n              method: 'POST',\n              headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(data)\n            });\n\n          case 3:\n            rawResponse = _context5.sent;\n            console.log(rawResponse);\n\n            if (!(rawResponse.status !== 200 && rawResponse.status !== 201)) {\n              _context5.next = 8;\n              break;\n            }\n\n            console.error(rawResponse);\n            throw new Error(rawResponse);\n\n          case 8:\n            _context5.next = 10;\n            return rawResponse.json();\n\n          case 10:\n            content = _context5.sent;\n            return _context5.abrupt(\"return\", content);\n\n          case 12:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function dispatchDbAction(_x4, _x5) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nexport default useDbPresistentLocationService;","map":{"version":3,"sources":["E:/priv/github/plan-your-trip/src/Services/DbPersistentLocationService.js"],"names":["DbActions","add","delete","update","removeAll","useDbPresistentLocationService","location","dispatchDbAction","remove","edit","console","warning","dbAction","data","url","fetch","method","headers","body","JSON","stringify","rawResponse","log","status","error","Error","json","content"],"mappings":";;AAAA,IAAMA,SAAS,GAAG;AACdC,EAAAA,GAAG,EAAE,QADS;AAEdC,EAAAA,MAAM,EAAE,QAFM;AAGdC,EAAAA,MAAM,EAAE,QAHM;AAIdC,EAAAA,SAAS,EAAE;AAJG,CAAlB;;AAOA,IAAMC,8BAA8B,GAAG,SAAjCA,8BAAiC,GAAM;AACzC,MAAIJ,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG,iBAAOK,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACAC,gBAAgB,CAACP,SAAS,CAACC,GAAX,EAAgBK,QAAhB,CADhB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAHL,GAAG;AAAA;AAAA;AAAA,KAAP;;AAIA,MAAIO,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG,kBAAOF,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACHC,gBAAgB,CAACP,SAAS,CAACE,MAAX,EAAmBI,QAAnB,CADb;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAANE,MAAM;AAAA;AAAA;AAAA,KAAV;;AAIA,MAAIC,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG,kBAAOH,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACDC,gBAAgB,CAACP,SAAS,CAACG,MAAX,EAAmBG,QAAnB,CADf;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAJG,IAAI;AAAA;AAAA;AAAA,KAAR;;AAIA,MAAIL,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;AAAA;AAAA;AAAA;AACZM,cAAAA,OAAO,CAACC,OAAR,CAAgB,mCAAhB;;AADY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAATP,SAAS;AAAA;AAAA;AAAA,KAAb;;AAIA,SAAO;AACHH,IAAAA,GAAG,EAAEA,GADF;AAEHO,IAAAA,MAAM,EAAEA,MAFL;AAGHC,IAAAA,IAAI,EAAEA,IAHH;AAIHL,IAAAA,SAAS,EAAEA;AAJR,GAAP;AAMH,CAvBD;;AAyBA,IAAMG,gBAAgB;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,kBAAOK,QAAP,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBC,YAAAA,GADiB,GACX,qCAAqCF,QAD1B;AAAA;AAAA,mBAGKG,KAAK,CAACD,GAAD,EAAM;AACjCE,cAAAA,MAAM,EAAE,MADyB;AAEjCC,cAAAA,OAAO,EAAE;AACL,0BAAU,kBADL;AAEL,gCAAgB;AAFX,eAFwB;AAMjCC,cAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,IAAf;AAN2B,aAAN,CAHV;;AAAA;AAGfQ,YAAAA,WAHe;AAYrBX,YAAAA,OAAO,CAACY,GAAR,CAAYD,WAAZ;;AAZqB,kBAclBA,WAAW,CAACE,MAAZ,KAAuB,GAAvB,IAA8BF,WAAW,CAACE,MAAZ,KAAuB,GAdnC;AAAA;AAAA;AAAA;;AAejBb,YAAAA,OAAO,CAACc,KAAR,CAAcH,WAAd;AAfiB,kBAgBX,IAAII,KAAJ,CAAUJ,WAAV,CAhBW;;AAAA;AAAA;AAAA,mBAmBCA,WAAW,CAACK,IAAZ,EAnBD;;AAAA;AAmBfC,YAAAA,OAnBe;AAAA,8CAoBdA,OApBc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAhBpB,gBAAgB;AAAA;AAAA;AAAA,GAAtB;;AAuBA,eAAeF,8BAAf","sourcesContent":["const DbActions = {\r\n    add: 'create',\r\n    delete: 'delete',\r\n    update: 'update',\r\n    removeAll: 'removeAll'\r\n}\r\n\r\nconst useDbPresistentLocationService = () => {\r\n    var add = async (location) => {\r\n        await dispatchDbAction(DbActions.add, location);\r\n    }\r\n\r\n    var remove = async (location) => {\r\n        await dispatchDbAction(DbActions.delete, location);\r\n    }\r\n\r\n    var edit = async (location) => {\r\n        await dispatchDbAction(DbActions.update, location);\r\n    }\r\n\r\n    var removeAll = async () => {\r\n        console.warning(\"Remove all is not implemented yet\");\r\n    }\r\n\r\n    return {\r\n        add: add,\r\n        remove: remove,\r\n        edit: edit,\r\n        removeAll: removeAll\r\n    }\r\n}\r\n\r\nconst dispatchDbAction = async (dbAction, data) => {\r\n    let url = 'http://localhost:5000/locations/' + dbAction;\r\n\r\n    const rawResponse = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n    });\r\n\r\n    console.log(rawResponse);\r\n\r\n    if(rawResponse.status !== 200 && rawResponse.status !== 201){\r\n        console.error(rawResponse);\r\n        throw new Error(rawResponse);\r\n    }\r\n    \r\n    const content = await rawResponse.json();\r\n    return content;\r\n}\r\n\r\nexport default useDbPresistentLocationService;"]},"metadata":{},"sourceType":"module"}