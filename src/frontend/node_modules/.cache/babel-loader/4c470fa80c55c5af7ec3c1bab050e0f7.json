{"ast":null,"code":"import _objectDestructuringEmpty from \"E:\\\\priv\\\\github\\\\plan-your-trip\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectDestructuringEmpty\";\nimport _slicedToArray from \"E:\\\\priv\\\\github\\\\plan-your-trip\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\priv\\\\github\\\\plan-your-trip\\\\src\\\\components\\\\Search\\\\Search.js\";\nimport React, { useState, useEffect } from 'react';\nimport WikipediaAPIWrapper from '../../Common/WikipediaAPIWrapper';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport SearchResult from './SearchResult';\nimport { ModalStateAction, useModalState, ModalTypes } from '../../State/ModalStateProvider';\nvar SearchTimeout = 700;\n\nvar Search = function Search() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchValue = _useState2[0],\n      setSearchValue = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      timer = _useState4[0],\n      setTimer = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      searchResults = _useState6[0],\n      setSearchResults = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isLoading = _useState8[0],\n      setIsLoading = _useState8[1];\n\n  var _useModalState = useModalState(),\n      _useModalState2 = _slicedToArray(_useModalState, 2);\n\n  _objectDestructuringEmpty(_useModalState2[0]);\n\n  var dispatchModal = _useModalState2[1];\n\n  var setupTimer = function setupTimer() {\n    clearTimeout(timer);\n    setTimer(setTimeout(handleSearchInputTimeout, SearchTimeout));\n  };\n\n  var handleSearchInputTimeout = function handleSearchInputTimeout() {\n    setIsLoading(true);\n    WikipediaAPIWrapper.search(searchValue).then(function (results) {\n      setSearchResults(results);\n      setIsLoading(false);\n    });\n  };\n\n  var handleSelection = function handleSelection(selection) {\n    setSearchResults(null);\n    setSearchValue(\"\");\n    dispatchModal({\n      type: ModalStateAction.show,\n      modalType: ModalTypes.loading\n    });\n    WikipediaAPIWrapper.getDetails(selection).then(function (location) {\n      dispatchModal({\n        type: ModalStateAction.show,\n        data: location,\n        modalType: ModalTypes.addLocation\n      });\n    });\n  };\n\n  useEffect(function () {\n    if (searchValue !== \"\") {\n      setupTimer();\n      setIsLoading(false);\n    }\n  }, [searchValue]);\n  return React.createElement(\"div\", {\n    className: \"Search container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    icon: \"search-location\",\n    className: \"fa-2x\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }))), React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"enter name\",\n    onChange: function onChange(e) {\n      return setSearchValue(e.target.value);\n    },\n    value: searchValue,\n    autoFocus: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"search-loading-indicator\",\n    style: {\n      display: isLoading ? \"block\" : \"none\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"search-loading-indicator-icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    icon: \"spinner\",\n    spin: true,\n    className: \"fa-2x\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  })))), React.createElement(SearchResult, {\n    results: searchResults,\n    onSelected: handleSelection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }));\n};\n\nexport default Search;","map":{"version":3,"sources":["E:/priv/github/plan-your-trip/src/components/Search/Search.js"],"names":["React","useState","useEffect","WikipediaAPIWrapper","FontAwesomeIcon","SearchResult","ModalStateAction","useModalState","ModalTypes","SearchTimeout","Search","searchValue","setSearchValue","timer","setTimer","searchResults","setSearchResults","isLoading","setIsLoading","dispatchModal","setupTimer","clearTimeout","setTimeout","handleSearchInputTimeout","search","then","results","handleSelection","selection","type","show","modalType","loading","getDetails","location","data","addLocation","e","target","value","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport WikipediaAPIWrapper from '../../Common/WikipediaAPIWrapper'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport SearchResult from './SearchResult';\r\nimport { ModalStateAction, useModalState, ModalTypes } from '../../State/ModalStateProvider'\r\n \r\nconst SearchTimeout = 700;\r\n\r\nvar Search = () => {\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [timer, setTimer] = useState(null);\r\n  const [searchResults, setSearchResults] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [{}, dispatchModal] = useModalState();\r\n\r\n  var setupTimer = () => {\r\n    clearTimeout(timer);\r\n    setTimer(setTimeout(handleSearchInputTimeout, SearchTimeout));\r\n  }\r\n\r\n  var handleSearchInputTimeout = () => { \r\n    setIsLoading(true);\r\n    WikipediaAPIWrapper.search(searchValue).then(results => \r\n      {\r\n        setSearchResults(results)\r\n        setIsLoading(false);\r\n      });\r\n  }\r\n\r\n  var handleSelection = (selection) => {\r\n    setSearchResults(null);\r\n    setSearchValue(\"\");\r\n    \r\n    dispatchModal({type: ModalStateAction.show, modalType: ModalTypes.loading});\r\n\r\n    WikipediaAPIWrapper.getDetails(selection).then(location => {\r\n      dispatchModal({type: ModalStateAction.show, data: location, modalType: ModalTypes.addLocation});\r\n    });\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(searchValue !== \"\")\r\n    {\r\n      setupTimer();\r\n      setIsLoading(false);\r\n    }\r\n  }, [searchValue])\r\n\r\n  return (\r\n    <div className=\"Search container\">\r\n      <div className=\"input-group mb-3\">\r\n        <div className=\"input-group-prepend\">\r\n          <span className=\"input-group-text\"><FontAwesomeIcon icon=\"search-location\" className=\"fa-2x\"/></span>\r\n        </div>\r\n      <input type=\"text\" className=\"form-control\" placeholder=\"enter name\" onChange={e => setSearchValue(e.target.value)} value={searchValue} autoFocus/>\r\n        <div className=\"search-loading-indicator\" style={{display: isLoading ? \"block\" : \"none\"}}>\r\n          <div className=\"search-loading-indicator-icon\">\r\n            <FontAwesomeIcon icon=\"spinner\" spin className=\"fa-2x\"/> \r\n          </div>\r\n        </div>\r\n      </div>\r\n    <SearchResult results={searchResults} onSelected={handleSelection}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Search;"]},"metadata":{},"sourceType":"module"}