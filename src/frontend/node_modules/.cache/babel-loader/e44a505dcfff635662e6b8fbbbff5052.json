{"ast":null,"code":"import _slicedToArray from \"E:\\\\priv\\\\github\\\\plan-your-trip\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\priv\\\\github\\\\plan-your-trip\\\\src\\\\components\\\\modals\\\\ModalContainer.js\";\nimport React, { useState, useEffect } from 'react';\nimport Modal from './Modal';\nimport { useModalState, ModalTypes, ModalStateAction } from '../../State/ModalStateProvider';\nimport { useLocationFormBuilder } from './LocationDetailsForm/LocationDetailsForm';\nimport ModalHeader from './ModalHeader';\nimport Search from '../Search/Search';\nimport AddNewLocationSelect from './AddNewLocationSelect';\nimport Confirmation from './Confirmation';\nimport LoadingIndicator from './LoadingIndicator';\nimport useLocationService from '../../Services/LocationService';\nimport useLoggerService from '../../Services/Diagnostics/LoggerService';\nvar _emptyModalContent = {\n  header: \"\",\n  body: \"\",\n  footer: \"\",\n  state: \"\"\n};\n\nvar useModalContentFactory = function useModalContentFactory() {\n  var _useModalState = useModalState(),\n      _useModalState2 = _slicedToArray(_useModalState, 2),\n      modalModel = _useModalState2[0],\n      dispatchModal = _useModalState2[1];\n\n  var locationService = useLocationService();\n  var logger = useLoggerService();\n\n  var create = function create(modalType) {\n    var locationFormBuilder = useLocationFormBuilder();\n\n    switch (modalType) {\n      case ModalTypes.addLocation:\n        return locationFormBuilder({\n          title: \"Add location\",\n          location: modalModel.data,\n          onSubmit: function onSubmit() {\n            locationService.add(modalModel.data);\n            dispatchModal({\n              type: ModalStateAction.hide\n            });\n          }\n        });\n\n      case ModalTypes.editLocation:\n        return locationFormBuilder({\n          title: \"Edit location\",\n          location: modalModel.data,\n          onSubmit: function onSubmit(data) {\n            locationService.edit(data);\n            dispatchModal({\n              type: ModalStateAction.hide\n            });\n          }\n        });\n\n      case ModalTypes.removeLocation:\n        var submitAction = function submitAction() {\n          locationService.remove(modalModel.data);\n          dispatchModal({\n            type: ModalStateAction.hide\n          });\n        };\n\n        return {\n          header: React.createElement(ModalHeader, {\n            title: \"Do you want to remove\\n\\r \\\"\".concat(modalModel.data.name, \"\\\"\"),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 55\n            },\n            __self: this\n          }),\n          body: React.createElement(Confirmation, {\n            onSubmit: function onSubmit() {\n              return submitAction(modalModel.data);\n            },\n            onCancel: function onCancel() {\n              return dispatchModal({\n                type: ModalStateAction.hide\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56\n            },\n            __self: this\n          }),\n          footer: null\n        };\n\n      case ModalTypes.search:\n        return {\n          header: React.createElement(ModalHeader, {\n            title: \"Search location\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64\n            },\n            __self: this\n          }),\n          body: React.createElement(Search, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65\n            },\n            __self: this\n          }),\n          footer: null\n        };\n\n      case ModalTypes.addNewLocationSelect:\n        return {\n          header: React.createElement(ModalHeader, {\n            title: \"Select option\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }),\n          body: React.createElement(AddNewLocationSelect, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          }),\n          footer: null\n        };\n\n      case ModalTypes.loading:\n        return {\n          header: React.createElement(ModalHeader, {\n            title: \"Loading...\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          }),\n          body: React.createElement(LoadingIndicator, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79\n            },\n            __self: this\n          }),\n          footer: null\n        };\n\n      default:\n        logger.warning(\"[ModalFactory] Incorrect modal type: \\\"\".concat(modalType, \"\\\"\"));\n        return _emptyModalContent;\n    }\n  };\n\n  return create;\n};\n\nvar ModalContainer = function ModalContainer() {\n  var _useState = useState(_emptyModalContent),\n      _useState2 = _slicedToArray(_useState, 2),\n      modalContent = _useState2[0],\n      setModalContent = _useState2[1];\n\n  var _useModalState3 = useModalState(),\n      _useModalState4 = _slicedToArray(_useModalState3, 1),\n      modalModel = _useModalState4[0];\n\n  var factory = useModalContentFactory();\n\n  var renderModal = function renderModal() {\n    var render = function render(ModalState) {\n      if (ModalState) {\n        return React.createElement(ModalState, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(Modal, {\n          isVisible: modalModel.isVisible,\n          header: modalContent.header,\n          body: modalContent.body,\n          footer: modalContent.footer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(Modal, {\n          isVisible: modalModel.isVisible,\n          header: modalContent.header,\n          body: modalContent.body,\n          footer: modalContent.footer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        });\n      }\n    };\n\n    return render(modalContent.state);\n  };\n\n  useEffect(function () {\n    setModalContent(factory(modalModel.type));\n  }, [modalModel]);\n  return renderModal();\n};\n\nexport default ModalContainer;","map":{"version":3,"sources":["E:/priv/github/plan-your-trip/src/components/modals/ModalContainer.js"],"names":["React","useState","useEffect","Modal","useModalState","ModalTypes","ModalStateAction","useLocationFormBuilder","ModalHeader","Search","AddNewLocationSelect","Confirmation","LoadingIndicator","useLocationService","useLoggerService","_emptyModalContent","header","body","footer","state","useModalContentFactory","modalModel","dispatchModal","locationService","logger","create","modalType","locationFormBuilder","addLocation","title","location","data","onSubmit","add","type","hide","editLocation","edit","removeLocation","submitAction","remove","name","search","addNewLocationSelect","loading","warning","ModalContainer","modalContent","setModalContent","factory","renderModal","render","ModalState","isVisible"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport Modal from './Modal'\r\nimport { useModalState, ModalTypes, ModalStateAction } from '../../State/ModalStateProvider'\r\nimport { useLocationFormBuilder } from './LocationDetailsForm/LocationDetailsForm'\r\nimport ModalHeader from './ModalHeader'\r\nimport Search from '../Search/Search'\r\nimport AddNewLocationSelect from './AddNewLocationSelect'\r\nimport Confirmation from './Confirmation'\r\nimport LoadingIndicator from './LoadingIndicator'\r\nimport useLocationService from '../../Services/LocationService'\r\nimport useLoggerService from '../../Services/Diagnostics/LoggerService'\r\n\r\nconst _emptyModalContent = {header: \"\", body: \"\", footer: \"\", state: \"\"};\r\n\r\nvar useModalContentFactory = () => {\r\n    const [modalModel, dispatchModal] = useModalState();\r\n    const locationService = useLocationService();\r\n    var logger = useLoggerService();\r\n\r\n    var create = (modalType) => {\r\n        var locationFormBuilder = useLocationFormBuilder();\r\n\r\n        switch(modalType){\r\n            case ModalTypes.addLocation:\r\n                return locationFormBuilder(\r\n                    {\r\n                        title: \"Add location\",\r\n                        location: modalModel.data,\r\n                        onSubmit: ()=>{\r\n                            locationService.add(modalModel.data)\r\n                            dispatchModal({\r\n                                type: ModalStateAction.hide})}\r\n                    }\r\n                )\r\n                \r\n            case ModalTypes.editLocation:\r\n                return locationFormBuilder(\r\n                    {\r\n                        title: \"Edit location\",\r\n                        location: modalModel.data,\r\n                        onSubmit: (data)=>{\r\n                                locationService.edit(data)\r\n                                dispatchModal({\r\n                                    type: ModalStateAction.hide})\r\n                            }\r\n                    }\r\n                )\r\n\r\n            case ModalTypes.removeLocation:\r\n                var submitAction = ()=>{\r\n                    locationService.remove(modalModel.data)\r\n                    dispatchModal({type: ModalStateAction.hide})};\r\n\r\n                return {\r\n                    header: <ModalHeader title={`Do you want to remove\\n\\r \"${modalModel.data.name}\"`}/>,\r\n                    body: <Confirmation \r\n                        onSubmit={()=>submitAction(modalModel.data)}\r\n                        onCancel={()=>dispatchModal({type: ModalStateAction.hide})}/>,\r\n                    footer: null\r\n                }\r\n                    \r\n            case ModalTypes.search: \r\n                return {\r\n                    header: <ModalHeader title=\"Search location\"/>,\r\n                    body: <Search />,\r\n                    footer: null\r\n                }\r\n\r\n            case ModalTypes.addNewLocationSelect:\r\n                return {\r\n                    header: <ModalHeader title=\"Select option\"/>,\r\n                    body: <AddNewLocationSelect />,\r\n                    footer: null\r\n                }\r\n\r\n            case ModalTypes.loading:\r\n                return {\r\n                    header: <ModalHeader title=\"Loading...\" />,\r\n                    body: <LoadingIndicator />,\r\n                    footer: null\r\n                }\r\n\r\n        default: \r\n            logger.warning(`[ModalFactory] Incorrect modal type: \"${modalType}\"`);\r\n            return _emptyModalContent;\r\n    }}\r\n    \r\n    return create;\r\n}\r\n\r\nvar ModalContainer = () => {\r\n    const [modalContent, setModalContent] = useState(_emptyModalContent);\r\n    const [modalModel] = useModalState();\r\n    const factory = useModalContentFactory();\r\n\r\n    var renderModal = () => {\r\n        var render = (ModalState) => {\r\n            if(ModalState) {\r\n                return  <ModalState>\r\n                            <Modal \r\n                                isVisible={modalModel.isVisible} \r\n                                header={modalContent.header}\r\n                                body={modalContent.body}\r\n                                footer={modalContent.footer}/>\r\n                        </ModalState>}\r\n            else {\r\n                return <Modal \r\n                    isVisible={modalModel.isVisible} \r\n                    header={modalContent.header}\r\n                    body={modalContent.body}\r\n                    footer={modalContent.footer}/>\r\n            }\r\n        }\r\n\r\n        return render(modalContent.state);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        setModalContent(factory(modalModel.type));\r\n    }, [modalModel])\r\n\r\n    return renderModal();\r\n}\r\n\r\nexport default ModalContainer\r\n"]},"metadata":{},"sourceType":"module"}