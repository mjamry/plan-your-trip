{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\priv\\\\github\\\\plan-your-trip\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\priv\\\\github\\\\plan-your-trip\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _objectDestructuringEmpty from \"E:\\\\priv\\\\github\\\\plan-your-trip\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectDestructuringEmpty\";\nimport _slicedToArray from \"E:\\\\priv\\\\github\\\\plan-your-trip\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { useLocationsState, LocationsStateActions } from '../State/LocationsState';\nimport useNotificationService from '../Services/NotificationService';\nimport useDbPersistenceService from './DbPersistentLocationService';\n\nvar useLocationService = function useLocationService() {\n  var _useLocationsState = useLocationsState(),\n      _useLocationsState2 = _slicedToArray(_useLocationsState, 2);\n\n  _objectDestructuringEmpty(_useLocationsState2[0]);\n\n  var dispatchLocations = _useLocationsState2[1];\n  var notificationService = useNotificationService();\n  var dbPersistentLocationService = useDbPersistenceService();\n\n  var add =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(location) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return dbPersistentLocationService.add(location);\n\n            case 3:\n              dispatchLocations({\n                type: LocationsStateActions.addLocation,\n                data: location\n              });\n              notificationService.success(\"New location added: \".concat(location.name));\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              notificationService.error(\"Error while adding location: \".concat(location.name));\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function add(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var edit =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(location) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return dbPersistentLocationService.edit(location);\n\n            case 3:\n              dispatchLocations({\n                type: LocationsStateActions.editLocation,\n                data: location\n              });\n              notificationService.success(\"Location modified: \".concat(location.name));\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              notificationService.error(\"Error while editing location: \".concat(location.name));\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function edit(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var remove =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(location) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return dbPersistentLocationService.remove(location);\n\n            case 3:\n              dispatchLocations({\n                type: LocationsStateActions.removeLocation,\n                data: location\n              });\n              notificationService.success(\"Location removed: \".concat(location.name));\n              _context3.next = 10;\n              break;\n\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](0);\n              notificationService.error(\"Error while removing location: \".concat(location.name));\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 7]]);\n    }));\n\n    return function remove(_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return {\n    add: add,\n    edit: edit,\n    remove: remove\n  };\n};\n\nexport default useLocationService;","map":{"version":3,"sources":["E:/priv/github/plan-your-trip/src/Services/LocationService.js"],"names":["useLocationsState","LocationsStateActions","useNotificationService","useDbPersistenceService","useLocationService","dispatchLocations","notificationService","dbPersistentLocationService","add","location","type","addLocation","data","success","name","error","edit","editLocation","remove","removeLocation"],"mappings":";;;;AAAA,SAASA,iBAAT,EAA4BC,qBAA5B,QAAyD,yBAAzD;AACA,OAAOC,sBAAP,MAAmC,iCAAnC;AACA,OAAOC,uBAAP,MAAoC,+BAApC;;AAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAAA,2BACGJ,iBAAiB,EADpB;AAAA;;AAAA;;AAAA,MAClBK,iBADkB;AAE7B,MAAMC,mBAAmB,GAAGJ,sBAAsB,EAAlD;AACA,MAAMK,2BAA2B,GAAGJ,uBAAuB,EAA3D;;AAEA,MAAIK,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG,iBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEIF,2BAA2B,CAACC,GAA5B,CAAgCC,QAAhC,CAFJ;;AAAA;AAGFJ,cAAAA,iBAAiB,CAAC;AACdK,gBAAAA,IAAI,EAAET,qBAAqB,CAACU,WADd;AAEdC,gBAAAA,IAAI,EAAEH;AAFQ,eAAD,CAAjB;AAIAH,cAAAA,mBAAmB,CAACO,OAApB,+BAAmDJ,QAAQ,CAACK,IAA5D;AAPE;AAAA;;AAAA;AAAA;AAAA;AAWFR,cAAAA,mBAAmB,CAACS,KAApB,wCAA0DN,QAAQ,CAACK,IAAnE;;AAXE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAHN,GAAG;AAAA;AAAA;AAAA,KAAP;;AAgBA,MAAIQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG,kBAAOP,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEGF,2BAA2B,CAACS,IAA5B,CAAiCP,QAAjC,CAFH;;AAAA;AAGHJ,cAAAA,iBAAiB,CAAC;AACdK,gBAAAA,IAAI,EAAET,qBAAqB,CAACgB,YADd;AAEdL,gBAAAA,IAAI,EAAEH;AAFQ,eAAD,CAAjB;AAIAH,cAAAA,mBAAmB,CAACO,OAApB,8BAAkDJ,QAAQ,CAACK,IAA3D;AAPG;AAAA;;AAAA;AAAA;AAAA;AAWHR,cAAAA,mBAAmB,CAACS,KAApB,yCAA2DN,QAAQ,CAACK,IAApE;;AAXG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAJE,IAAI;AAAA;AAAA;AAAA,KAAR;;AAeA,MAAIE,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG,kBAAOT,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAECF,2BAA2B,CAACW,MAA5B,CAAmCT,QAAnC,CAFD;;AAAA;AAGLJ,cAAAA,iBAAiB,CAAC;AACdK,gBAAAA,IAAI,EAAET,qBAAqB,CAACkB,cADd;AAEdP,gBAAAA,IAAI,EAAEH;AAFQ,eAAD,CAAjB;AAIAH,cAAAA,mBAAmB,CAACO,OAApB,6BAAiDJ,QAAQ,CAACK,IAA1D;AAPK;AAAA;;AAAA;AAAA;AAAA;AAWLR,cAAAA,mBAAmB,CAACS,KAApB,0CAA4DN,QAAQ,CAACK,IAArE;;AAXK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAANI,MAAM;AAAA;AAAA;AAAA,KAAV;;AAeA,SAAO;AACHV,IAAAA,GAAG,EAAEA,GADF;AAEHQ,IAAAA,IAAI,EAAEA,IAFH;AAGHE,IAAAA,MAAM,EAAEA;AAHL,GAAP;AAIH,CAvDD;;AAyDA,eAAed,kBAAf","sourcesContent":["import { useLocationsState, LocationsStateActions } from '../State/LocationsState'\r\nimport useNotificationService from '../Services/NotificationService'\r\nimport useDbPersistenceService from './DbPersistentLocationService'\r\n\r\nconst useLocationService = () => {\r\n    const [{}, dispatchLocations] = useLocationsState();\r\n    const notificationService = useNotificationService();\r\n    const dbPersistentLocationService = useDbPersistenceService();\r\n\r\n    var add = async (location) => {\r\n        try{\r\n            await dbPersistentLocationService.add(location)\r\n            dispatchLocations({\r\n                type: LocationsStateActions.addLocation, \r\n                data: location});\r\n            \r\n            notificationService.success(`New location added: ${location.name}`);\r\n        }\r\n        catch(e)\r\n        {\r\n            notificationService.error(`Error while adding location: ${location.name}`);\r\n        }\r\n  \r\n    }\r\n\r\n    var edit = async (location) => {\r\n        try{\r\n            await dbPersistentLocationService.edit(location)\r\n            dispatchLocations({\r\n                type: LocationsStateActions.editLocation, \r\n                data: location})\r\n    \r\n            notificationService.success(`Location modified: ${location.name}`);\r\n        }\r\n        catch(e)\r\n        {\r\n            notificationService.error(`Error while editing location: ${location.name}`);\r\n        }\r\n    }\r\n\r\n    var remove = async (location) => {\r\n        try{\r\n            await dbPersistentLocationService.remove(location)\r\n            dispatchLocations({\r\n                type: LocationsStateActions.removeLocation, \r\n                data: location})\r\n                \r\n            notificationService.success(`Location removed: ${location.name}`);\r\n        }\r\n        catch(e)\r\n        {\r\n            notificationService.error(`Error while removing location: ${location.name}`);\r\n        }\r\n    }\r\n\r\n    return {\r\n        add: add, \r\n        edit: edit, \r\n        remove: remove}\r\n}\r\n\r\nexport default useLocationService;"]},"metadata":{},"sourceType":"module"}